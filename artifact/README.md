# Artifact for "Specifying and Testing GPU Workgroup Progress Models"

## Abstract

TODO

## Getting started

These instructions have been tested on a 64-bit Linux machine running an OS
similar to Ubuntu 18.04 with Docker installed and with Bash as the shell. Other
configurations are likely to work since we mostly use Docker.

## Build the docker image

Change into the directory:

```sh
cd gpufwd_image/
```

Execute the following commands to build the Docker image, 
build the Docker container, and start the Docker container:

```sh
sudo docker build -t gpufwd-image .

sudo docker stop gpufwd-container  # May fail.
sudo docker rm gpufwd-container    # May fail.
sudo docker create -it --name gpufwd-container gpufwd-image

sudo docker start -ia gpufwd-container
```

You should now have a Bash shell inside the container.

## Test Generation

_TODO: Tyler and Lucas figure out how to get test generation running_

_TODO: instructions for running 2 thread 2 instruction variants_

_TODO: State that running larger experiments require tons of time and tons of RAM_

_TODO: point to Lucas Test explorer, both the Princeton hosted page and the git repo, as well as generated raw tests
> Hugues: we can probably include the html pages directly in the artifact image, for local browsing?

## CADP

In Section 4 "Executable Semantics of Progress Models", we describe how we use
the CADP verification toolbox to automatically check whether a given litmus test
is guaranteed to terminate under various progress models.

### CADP install

CADP is a closed-source research software that requires a license to run, and as
such it is not possible for us to embed it in this artifact.

Academic users can obtain a personal, free-of-charge license, see:
https://cadp.inria.fr/registration/

For users who cannot easily obtain CADP, we still provide a standalone example
that shows CADP input and output files, to illustrate how we use the toolbox and
how it lets us check for test termination.

### Standalone example (does not require a CADP install)

We use the paper's "mutex" running example as a standalone example of
CADP.

We use two types of input files to CADP:

 - `*.lnt` files represent models written in the LNT formal language.
 
 - `*.svl` files represent verification scenarios written in the script
   verification language (SVL), where we typically check properties expressed in
   the model checking language (MCL) onto LNT models.

The `gpufwd_image/cadp/mutex-example` directory contains all related files:

 - `gpufwd.lnt` is an LNT program containing all the common part of our
   executable semantics. In particular, it defines three types of processes:
   Interpreter executes programs of AXB instructions, SharedMemory models the
   memory shared between threads, and we have a collection of process to
   represent the various progress models.
 
 - `mutex.lnt` 

We use a standalone example

The `gpufwd_image/cadp/standalone-example` directory contains the LNT
specification of a litmus test, splitted in two files.

### Processing the tests generated by Alloy

Hugues: TODO once we have the test generation in a good shape.



_TODO: Hugues_

At the core, we have the LNT spec that's parametrized by test programs.

Ship one stand-alone example.

Then explain that we have scripts to generate litmus test programs in their LNT
forms from the ones produced by Alloy.

How to get CADP with a license.

Ship C code?

## Emprical Testing

### C++ Code

_TODO: Tyler: this should work_

### Vulkan Code

_TODO: Tyler: install amber and switftshader_

### CUDA and Metal Code

_TODO: Tyler: will not be able to execute, but we can provide the xcode projects_

## Data

_TODO: Tyler_
